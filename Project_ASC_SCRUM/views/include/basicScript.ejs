<script>
//SOCKET Open
		var socket = io.connect();
	/** 스프린트 관련 */
	/** 스프린트 넘어가기 */
	$('#nextSprintBtn').on("click", function(event) {
		event.preventDefault();
	// 	var chg = (decodeURIComponent('${cookie.name.value}'));
	// 	var articleNo = $(this).next().next().val();
	// 	var productN = $(this).next().next().next().val();
	// 	var from = $(this).next().next().next().next().val();
	
	var text = '넘어가실 경우 되돌릴 수 없습니다.'
			text += '\n'+'ToDo 및 Doing 또한 넘어갑니다.'
	swal({
		  title: '다음 스프린트로'+'\n'+'넘어가시겠습니까?',
			text: text,
		  showCancelButton: true,
		  confirmButtonColor: '#3085d6',
		  cancelButtonColor: '#d33',
		  confirmButtonText: '확인',
		  cancelButtonText: '취소'
		}).then(function () {
  		if($('.maxSprint').val() > 0){
				var sprint_no = $('.maxSprint').val();
			} else {
				var sprint_no = $('.currentSprint').val();
			}
			  socket.emit('sprintAdd', {
			    scrum_no : <%=scrum_no%>,
			 		sprint_no : sprint_no
			 	});
			 location.href='/taskboard/<%=project_list_no%>/0/<%=loginId%>';
  });		  
		  
		  
		
		return false;
	});
	/** 스프린트 제거 */
	$('#ClearSprintBtn').on("click", function(event) {
		event.preventDefault();
	// 	var chg = (decodeURIComponent('${cookie.name.value}'));
	// 	var articleNo = $(this).next().next().val();
	// 	var productN = $(this).next().next().next().val();
	// 	var from = $(this).next().next().next().next().val();

	swal({
		  title: '전체 스프린트를'+'\n'+'지우시겠습니까??',
			text: '삭제 하실 경우 되돌릴 수 없습니다.',
		  showCancelButton: true,
		  confirmButtonColor: '#3085d6',
		  cancelButtonColor: '#d33',
		  confirmButtonText: '확인',
		  cancelButtonText: '취소',
		  showLoaderOnConfirm: true
		}).then(function () {
				if($('.maxSprint').val() > 0){
					var sprint_no = $('.maxSprint').val();
				} else {
					var sprint_no = $('.currentSprint').val();
				}
			  socket.emit('sprintRemove', {
			    scrum_no : <%=scrum_no%>,
			    sprint_no : sprint_no
			  });
			  location.href='/taskboard/<%=project_list_no%>/0/<%=loginId%>';
  });
		
		return false;
	});
	/** 스프린트 관련 종료 */
	/*채팅창 팝업*/
	$(function() {
		$("#chatBtn").click(function() {
            /* $('html, body').animate({
                scrollTop : 0
            }, 400);
            return false; */
            popupOpen();
        });
        
        var chatName = $("#chatName").val();
	
	
	function popupOpen() {

		var popUrl = "http://localhost:3000/chats/" + chatName; //팝업창에 출력될 페이지 URL
    		
    		//var popUrl = "http://www.naver.com";
    		
    		console.log(popUrl);
    		
    		var cw = screen.availWidth; // 화면너비
    		var ch = screen.availHeight; // 화면높이
    		var sw = 1000; // 띄울 창 너비
    		var sh = 500; // 띄울 창 높이
    		var ml = (cw-sw)/2;
    		var mt = (ch-sh)/2;

    		var popOption = "width="+sw+", height="+sh+", top="+mt+",left="+ml+" resizable=no, scrollbars=no, status=no;"; //팝업창 옵션(optoin)

    		window.open(popUrl, "", popOption);

	}
	});
		//스크롤 최상단으로 + 채팅
    $(function() {
        /* $(window).scroll(function() {
            if ($(this).scrollTop() > 500) {
                $('#chatBtn').fadeIn();
            } else {
                $('#chatBtn').fadeOut();
            }
        }); */
        $("#chatBtn").click(function() {
            $('html, body').animate({
                scrollTop : 0
            }, 400);
            return false;
        });
    });

	//logout
  $('.logoutBtn').on('click', function() {
	  swal({
		  title: '로그아웃 하시겠습니까?',
		  text: "",
		  type: 'warning',
		  showCancelButton: true,
		  confirmButtonColor: '#3085d6',
		  cancelButtonColor: '#d33',
		  confirmButtonText: 'YES',
		  cancelButtonText: 'NO'
		}).then(function () {
			location.href = 'http://localhost/';
		})
	  
  });
  </script>